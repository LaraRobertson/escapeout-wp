(()=>{"use strict";var e,l={215:()=>{const e=window.wp.blocks,l=window.wp.blockEditor,n=(window.wp.richText,window.wp.i18n),a=window.wp.components,t=window.React,o=window.wp.data,s=window.ReactJSXRuntime;function i({imageId:e,size:l="thumbnail"}){const{image:n}=(0,o.useSelect)((l=>({image:l("core").getMedia(e)})));return(0,s.jsx)(s.Fragment,{children:n&&(0,s.jsx)("img",{...(()=>{let e={src:n.source_url,alt:n.alt_text,className:`attachment-${l} size-${l}`,width:n.media_details.width,height:n.media_details.height};return n.media_details&&n.media_details.sizes&&n.media_details.sizes[l]&&(e.src=n.media_details.sizes[l].source_url,e.width=n.media_details.sizes[l].width,e.height=n.media_details.sizes[l].height),e})()})})}function r({iconPath:e}){const l=window.my_data.siteUrl+e+".svg";return""!==e?(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:l})}):(0,s.jsx)("div",{children:"icon not set"})}function c(e,l,n,a,t,o,s){const i=o.playZones.concat([]);switch(e){case"puzzle":i[a].puzzleArray[t][l]=n;break;case"clue":if(i[a].clueArray[t][l]=n,"iconName"===l){const e="/wp-content/plugins/escapeout-game/assets/"+n;i[a].clueArray[t].iconPath=e}break;case"hint":i[a].hintArray[t][l]=n}s({playZones:i})}function d(e,l,n,a,t,o){const s=t.playZones.concat([]),i=l.filter((function(e,l){return l!=a}));switch(e){case"puzzle":console.log("delete puzzle"),0===i.length?delete s[n].puzzleArray:s[n].puzzleArray=i;break;case"clue":console.log("delete clue"),0===i.length?delete s[n].clueArray:s[n].clueArray=i;break;case"hint":console.log("delete hint"),0===i.length?delete s[n].hintArray:s[n].hintArray=i}o({playZones:s})}function u({puzzleArray:e,index:l,attributes:n,setAttributes:t,playZoneName:o}){return void 0!==e?(0,s.jsx)(s.Fragment,{children:e?.map((function(i,r){return(0,s.jsxs)("div",{className:"puzzleDiv",children:[(0,s.jsx)("div",{className:"Yes"==i.disabled?"disabled":""}),(0,s.jsxs)("div",{className:"item-title-edit",children:["Puzzles ",r+1," (zone name: ",o,"):"]}),(0,s.jsxs)(a.Flex,{children:[(0,s.jsxs)(a.FlexBlock,{children:[(0,s.jsx)(a.TextControl,{label:"Puzzle Name",autoFocus:null==i.name,value:i.name,onChange:e=>{c("puzzle","name",e,l,r,n,t)}}),(0,s.jsx)(a.TextControl,{label:"Puzzle Description",autoFocus:null==i.description,value:i.description,onChange:e=>{c("puzzle","description",e,l,r,n,t)}})]}),(0,s.jsxs)(a.FlexBlock,{children:[(0,s.jsx)(a.TextControl,{label:"Puzzle Question",autoFocus:null==i.question,value:i.question,onChange:e=>{c("puzzle","question",e,l,r,n,t)}}),(0,s.jsx)(a.TextControl,{label:"Puzzle Answer",autoFocus:null==i.answer,value:i.answer,onChange:e=>{c("puzzle","answer",e,l,r,n,t)}})]}),(0,s.jsxs)(a.Flex,{direction:"column",children:[(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.RadioControl,{selected:i.disabled,options:[{label:"Live",value:"No"},{label:"Disabled",value:"Yes"}],onChange:e=>{c("puzzle","disabled",e,l,r,n,t)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.TextControl,{label:"Order",style:{width:"50px"},type:"number",autoFocus:null==i.order,value:i.order,onChange:e=>{c("puzzle","order",e,l,r,n,t)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isLink:!0,className:"attention-delete",onClick:()=>d("puzzle",e,l,r,n,t),children:"Delete"})})]})]})]},r)}))}):(0,s.jsx)("div",{children:"no puzzles"})}function x({clueArray:e,index:t,attributes:o,setAttributes:i,playZoneName:u}){const x=["image"];return void 0!==e?(0,s.jsx)(s.Fragment,{children:e?.map((function(h,m){return(0,s.jsxs)("div",{className:"clueDiv",children:[(0,s.jsx)("div",{className:"Yes"==h.disabled?"disabled":""}),(0,s.jsxs)("div",{className:"item-title-edit",children:["Clues ",m+1," (zone name:  ",u,"):"]}),(0,s.jsxs)(a.Flex,{children:[(0,s.jsxs)(a.FlexBlock,{children:[(0,s.jsx)(a.TextControl,{label:"Clue Name",autoFocus:null==h.name,value:h.name,onChange:e=>{c("clue","name",e,t,m,o,i)}}),(0,s.jsx)(a.TextControl,{label:"Clue Text",autoFocus:null==h.text,value:h.text,onChange:e=>{c("clue","text",e,t,m,o,i)}}),(0,s.jsx)(a.SelectControl,{label:"Icon",value:h.iconName,options:[{label:"choose icon",value:""},{label:"magnifying glass",value:"magnifying-glass"},{label:"torn paper",value:"torn-paper"},{label:"envelope",value:"envelope"},{label:"message in a bottle",value:"message-in-a-bottle"},{label:"note question",value:"note-question"},{label:"diary",value:"diary"}],onChange:e=>{c("clue","iconName",e,t,m,o,i)},__nextHasNoMarginBottom:!0}),(0,s.jsx)("div",{children:(0,s.jsx)(r,{iconPath:h.iconPath})})]}),(0,s.jsx)(a.FlexBlock,{children:(0,s.jsx)(l.MediaUploadCheck,{children:(0,s.jsx)(l.MediaUpload,{onSelect:e=>{!function(e,l,n,a,t){const o=a.playZones.concat([]);o[l].clueArray[n].imageID=e.id,o[l].clueArray[n].imageURL=e.url,t({playZones:o})}(e,t,m,o,i)},title:(0,n.__)("Clue Image","game-block"),allowedTypes:x,multiple:!1,value:h.imageID,render:({open:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Button,{className:"button",onClick:e,children:"Open Media Library"}),h.imageURL&&(0,s.jsx)("img",{src:h.imageURL,alt:(0,n.__)("Clue Image","game-block"),style:{display:"block",maxWidth:"250px",height:"auto"}})]})})})}),(0,s.jsxs)(a.Flex,{direction:"column",children:[(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.RadioControl,{selected:h.disabled,options:[{label:"Live",value:"No"},{label:"Disabled",value:"Yes"}],onChange:e=>{c("clue","disabled",e,t,m,o,i)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.TextControl,{label:"Order",style:{width:"50px"},type:"number",autoFocus:null==h.order,value:h.order,onChange:e=>{c("clue","order",e,t,m,o,i)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isLink:!0,className:"attention-delete",onClick:()=>d("clue",e,t,m,o,i),children:"Delete"})})]})]})]},m)}))}):(0,s.jsx)("div",{children:"no clues"})}function h({hintArray:e,index:l,attributes:n,setAttributes:t,playZoneName:o}){return void 0!==e?(0,s.jsx)(s.Fragment,{children:e?.map((function(i,r){return(0,s.jsxs)("div",{className:"puzzleDiv",children:[(0,s.jsx)("div",{className:"Yes"==i.disabled?"disabled":""}),(0,s.jsxs)("div",{className:"item-title-edit",children:["Hints ",r+1," (zone name: ",o,"):"]}),(0,s.jsxs)(a.Flex,{children:[(0,s.jsxs)(a.FlexBlock,{children:[(0,s.jsx)(a.TextControl,{label:"Hint Name",autoFocus:null==i.name,value:i.name,onChange:e=>{c("hint","name",e,l,r,n,t)}}),(0,s.jsx)(a.TextControl,{label:"Hint Text",autoFocus:null==i.text,value:i.text,onChange:e=>{c("hint","text",e,l,r,n,t)}})]}),(0,s.jsxs)(a.Flex,{direction:"column",children:[(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.RadioControl,{selected:i.disabled,options:[{label:"Live",value:"No"},{label:"Disabled",value:"Yes"}],onChange:e=>{c("hint","disabled",e,l,r,n,t)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.TextControl,{label:"Order",style:{width:"50px"},type:"number",autoFocus:null==i.order,value:i.order,onChange:e=>{c("hint","order",e,l,r,n,t)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isLink:!0,className:"attention-delete",onClick:()=>d("hint",e,l,r,n,t),children:"Delete"})})]})]})]},r)}))}):(0,s.jsx)("div",{children:"no hints"})}function m({playZone:e,index:t,editZoneMedia:o,editZone:r,deletePlayZone:c}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"Yes"==e.disabled?"disabled":""}),(0,s.jsxs)("div",{className:"item-title-edit",children:["Zones ",t+1,":"]}),(0,s.jsxs)(a.Flex,{children:[(0,s.jsxs)(a.FlexBlock,{children:[(0,s.jsx)(a.TextControl,{label:"Zone Name",autoFocus:null==e.name,value:e.name,onChange:e=>{r("name",e,t)}}),(0,s.jsx)(a.TextControl,{label:"Zone Description",autoFocus:null==e.description,value:e.description,onChange:e=>{r("description",e,t)}}),(0,s.jsx)(a.TextControl,{label:"Latitude",autoFocus:null==e.lat,value:e.lat,onChange:e=>{r("lat",e,t)}}),(0,s.jsx)(a.TextControl,{label:"Longitude",autoFocus:null==e.long,value:e.long,onChange:e=>{r("long",e,t)}})]}),(0,s.jsx)(a.FlexBlock,{className:"image-holder",children:(0,s.jsx)(l.MediaUploadCheck,{children:(0,s.jsx)(l.MediaUpload,{onSelect:e=>{o(e,t)},title:(0,n.__)("Zone Image","game-block"),allowedTypes:["image"],multiple:!1,value:e.imageID,render:({open:l})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Button,{className:"button",onClick:l,children:"Open Media Library"}),(0,s.jsx)(i,{imageId:e.imageID})]})})})}),(0,s.jsxs)(a.Flex,{direction:"column",children:[(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.RadioControl,{selected:e.disabled,options:[{label:"Live",value:"No"},{label:"Disabled",value:"Yes"}],onChange:e=>{r("disabled",e,t)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.TextControl,{label:"Order",style:{width:"50px"},type:"number",autoFocus:null==e.order,value:e.order,onChange:e=>{r("order",e,t)}})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isLink:!0,className:"attention-delete",onClick:()=>c(t),children:"Delete"})})]})]})]})}const p=JSON.parse('{"UU":"create-block/escapeout-game"}');(0,e.registerBlockType)(p.UU,{edit:function({attributes:e,setAttributes:n}){const[o,i]=(0,t.useState)(!1),[r,c]=(0,t.useState)("test"),d=(0,l.useBlockProps)(),p={id:"",name:"",description:"",lat:"",long:"",imageID:"",order:"",disabled:"No"},j={name:"",description:"",question:"",answer:"",order:"",disabled:"No"},g={name:"",text:"",iconName:"",iconPath:"",imageID:"",order:"",disabled:"No"},b={name:"",text:"",order:"",disabled:"No"};function v(l){console.log("deletePlayZone");const a=e.playZones.filter((function(e,n){return n!=l}));n({playZones:a})}function y(){console.log("addZone!");const l=(e=>{const l=[...Array.from({length:10},((e,l)=>String.fromCharCode("0".charCodeAt(0)+l))),...Array.from({length:26},((e,l)=>String.fromCharCode("a".charCodeAt(0)+l)))];return Array.from({length:e},(()=>{return l[(e=l.length,Math.floor(Math.random()*e))];var e})).join("")})(6);console.log("zoneID: "+l);let a={...p};a.id=l,n({playZones:e.playZones.concat([a])})}function C(l,a,t){const o=e.playZones.concat([]);o[t][l]=a,console.log("playZones newArray: "+JSON.stringify(o)),n({playZones:o})}function z(l,a){const t=e.playZones.concat([]);t[a].imageID=l.id,t[a].imageURL=l.url,n({playZones:t})}return(0,t.useEffect)((()=>{1===e.playZones.length&&"1"===e.playZones[0].id&&(console.log("playZones.length: "+e.playZones.length),console.log("playZones id: "+JSON.stringify(e.playZones)),v(0))}),[]),e.playZones.length>0?(0,s.jsx)("div",{...d,children:(0,s.jsxs)("div",{className:"game-block-edit-block",style:{backgroundColor:e.bgColor},children:[(0,s.jsx)("div",{className:"like-label",children:"Go To:"}),(0,s.jsxs)(a.Flex,{children:[(0,s.jsx)("a",{href:"#zone-help-text",className:"button",children:"Zone Help Text"}),(0,s.jsx)("a",{href:"#puzzle-help-text",className:"button",children:"Puzzle Help Text"}),(0,s.jsx)("a",{href:"#clue-help-text",className:"button",children:"Clue Help Text"}),(0,s.jsx)("a",{href:"#hint-help-text",className:"button",children:"Hint Help Text"}),(0,s.jsx)("a",{href:"#waiver-text",className:"button",children:"Waiver Text"})]}),(0,s.jsx)("div",{className:"like-label",children:"Game Text:"}),(0,s.jsx)("div",{style:{backgroundColor:"white",padding:"10px",marginBottom:"10px"},children:(0,s.jsx)(l.InnerBlocks,{allowedBlocks:["core/heading","core/paragraph"],template:[["core/heading",{level:3,placeholder:"Insert your heading here..."}],["core/paragraph",{placeholder:"Write some description text here..."}]],templateLock:"all"})}),(0,s.jsx)(l.BlockControls,{}),(0,s.jsx)(l.InspectorControls,{children:(0,s.jsx)(a.PanelBody,{title:"Background Color",initialOpen:!0,children:(0,s.jsx)(a.PanelRow,{children:(0,s.jsx)(a.ColorPicker,{color:e.bgColor,onChange:e=>n({bgColor:e}),enableAlpha:!0,defaultValue:"#000"})})})}),(0,s.jsx)(a.TextControl,{label:"Game Name:",value:e.gameName,onChange:function(e){console.log("update game name"),n({gameName:e})},style:{fontSize:"20px"}}),(0,s.jsx)("div",{className:"item-holder-edit",children:e.playZones.map((function(l,t){return(0,s.jsxs)("div",{className:"zoneDiv",children:[(0,s.jsx)(m,{playZone:l,index:t,editZoneMedia:z,editZone:C,deletePlayZone:v}),(0,s.jsxs)(a.Flex,{justify:"flex-start",className:"buttons",children:[(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isPrimary:!0,onClick:()=>{!function(l){console.log("addClue");const a=e.playZones.concat([]),t=a[l];Object.hasOwn(t,"clueArray")?t.clueArray.push(g):t.clueArray=[g],n({playZones:a})}(t)},children:"Add Clue"})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isPrimary:!0,onClick:()=>{!function(l){console.log("addHint");const a=e.playZones.concat([]),t=a[l];Object.hasOwn(t,"hintArray")?t.hintArray.push(b):t.hintArray=[b],n({playZones:a})}(t)},children:"Add Hint"})}),(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isPrimary:!0,onClick:()=>{!function(l){console.log("addPuzzle");const a=e.playZones.concat([]),t=a[l];Object.hasOwn(t,"puzzleArray")?t.puzzleArray.push(j):t.puzzleArray=[j],n({playZones:a})}(t)},children:"Add Puzzle"})})]}),(0,s.jsx)("div",{className:"item-holder-edit",children:(0,s.jsx)(u,{puzzleArray:l.puzzleArray,index:t,attributes:e,setAttributes:n,playZoneName:l.name})}),(0,s.jsx)("div",{className:"item-holder-edit",children:(0,s.jsx)(x,{clueArray:l.clueArray,index:t,attributes:e,setAttributes:n,playZoneName:l.name})}),(0,s.jsx)("div",{className:"item-holder-edit",children:(0,s.jsx)(h,{hintArray:l.hintArray,index:t,attributes:e,setAttributes:n,playZoneName:l.name})})]},t)}))}),(0,s.jsx)(a.Flex,{children:(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isPrimary:!0,onClick:()=>{y()},children:"Add Another Zone"})})}),(0,s.jsx)("div",{className:"text-area-container",id:"zone-help-text",children:(0,s.jsx)(a.TextareaControl,{label:"Zone Help Text':",value:e.zoneText,onChange:function(e){console.log("update zone text"),n({zoneText:e})},style:{fontSize:"15px"}})}),(0,s.jsx)("div",{className:"like-label",id:"waiver-text",children:"Waiver Text:"}),(0,s.jsxs)("div",{className:"text-area-container",children:[(0,s.jsx)(a.TextareaControl,{label:"Waiver Top:",value:e.waiverTop,onChange:function(e){console.log("update waiver top"),n({waiverTop:e})},style:{fontSize:"15px"}}),(0,s.jsx)(a.TextareaControl,{label:"Waiver Body':",value:e.waiverBody,onChange:function(e){console.log("update waiver body"),n({waiverBody:e})},style:{fontSize:"15px"}}),(0,s.jsxs)(a.Button,{isPrimary:!0,onClick:()=>{i(!o)},children:[(0,s.jsx)("div",{className:o?"hide":"show",children:"View Waiver Text"}),(0,s.jsx)("div",{className:o?"show":"hide",children:"Close Waiver Text"})]}),(0,s.jsxs)("div",{className:o?"waiver-container show":"hide",children:[(0,s.jsx)("div",{className:"waiver-top",children:e.waiverTop}),(0,s.jsx)("div",{className:"waiver-body",children:e.waiverBody})]})]})]})}):(0,s.jsx)("div",{...d,children:(0,s.jsxs)("div",{className:"game-block-edit-block",style:{backgroundColor:e.bgColor},children:[(0,s.jsx)("h4",{children:"The first step to creating a game is adding a Zone."}),(0,s.jsx)("div",{children:"Zones are areas where people will play. Your Clues and Puzzles should be about things in the Zone area. Typically Zones have a center and the play area is about 100 feet around center. Games can have more than 1 Zone."}),(0,s.jsx)("br",{}),(0,s.jsx)(a.Flex,{children:(0,s.jsx)(a.FlexItem,{children:(0,s.jsx)(a.Button,{isPrimary:!0,onClick:()=>{y()},children:"Add A Zone"})})})]})})},save:e=>(0,s.jsx)(l.InnerBlocks.Content,{})})}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return l[e](o,o.exports,a),o.exports}a.m=l,e=[],a.O=(l,n,t,o)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],t=e[d][1],o=e[d][2];for(var i=!0,r=0;r<n.length;r++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](n[r])))?n.splice(r--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var c=t();void 0!==c&&(l=c)}}return l}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,t,o]},a.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={57:0,350:0};a.O.j=l=>0===e[l];var l=(l,n)=>{var t,o,s=n[0],i=n[1],r=n[2],c=0;if(s.some((l=>0!==e[l]))){for(t in i)a.o(i,t)&&(a.m[t]=i[t]);if(r)var d=r(a)}for(l&&l(n);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},n=self.webpackChunkgame_block=self.webpackChunkgame_block||[];n.forEach(l.bind(null,0)),n.push=l.bind(null,n.push.bind(n))})();var t=a.O(void 0,[350],(()=>a(215)));t=a.O(t)})();